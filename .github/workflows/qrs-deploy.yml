[app]

# ────────────────────────────────────────── APP INFO
title = QRS — Quantum Road Scanner
package.name = qrs
package.domain = com.chaosresonance
version = 7.7.7

# ────────────────────────────────────────── SOURCE
source.dir = .
source.include_exts = py,png,jpg,jpeg,ttf,otf,kv,atlas,gguf,aes,db,txt,md
source.exclude_patterns = *.pyc,__pycache__,*.pyo,.git,*.log,tmp.db,.buildozer,bin

# ────────────────────────────────────────── REQUIREMENTS (PERFECT 2025 COMBO)
requirements = python3==3.11.9,\
    kivy==2.3.0,\
    kivymd==1.2.0,\
    numpy,\
    pyjnius,\
    android,\
    psutil,\
    httpx,\
    aiosqlite,\
    cryptography==42.0.8,\
    pennylane==0.36.0,\
    pennylane-lightning==0.36.0,\
    llama-cpp-python==0.2.85

# These MUST be installed before p4a starts (fixes GitHub Actions 99% of the time)
android.pip_install_pre = cryptography==42.0.8,pennylane-lightning==0.36.0

# ────────────────────────────────────────── VISUAL
orientation = portrait
fullscreen = 0
presplash.filename = %(source.dir)s/data/presplash.png
icon.filename = %(source.dir)s/data/icon.png

# ────────────────────────────────────────── ANDROID TARGET
android.api = 34
android.minapi = 24
android.sdk = 34
android.ndk = 25b
android.archs = arm64-v8a, armeabi-v7a

# ────────────────────────────────────────── PERMISSIONS (minimal & Play Store safe)
android.permissions = INTERNET,ACCESS_FINE_LOCATION,ACCESS_COARSE_LOCATION,FOREGROUND_SERVICE

# ────────────────────────────────────────── BUILDOZER / P4A SETTINGS
p4a.branch = develop
android.accept_sdk_license = True
android.private_storage = False
android.allow_backup = False

# llama.cpp loves this flag
android.extra_args = --enable-preview

# ────────────────────────────────────────── LOGGING
log_level = 2
android.logcat_filters = *:S python:D
